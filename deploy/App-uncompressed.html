<!DOCTYPE html>
<html>
<head>
    <title>hack</title>

    <script type="text/javascript" src="/apps/2.0/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
//    launch: function() {
////          this.add({
////              xtype: 'rallygrid',
////              columnCfgs: [
////                  'FormattedID',
////                  'Name',
////                  'Owner',
////                  'Severity',
////                  'Priority',
////                  'Milestones'
////              ],
////              context: this.getContext(),
////              enableEditing: true,
////              showRowActionsColumn: false,
////              storeConfig: {
////                  model: 'PortfolioItem',
////                
////                  filters: [
////                  {
////                    property: 'Milestones.ObjectID',
////                    value: null
////                  }]
////              }
////          });
//      
//      console.log('loading tree');
//        Ext.create('Rally.data.wsapi.TreeStoreBuilder').build({
//            models: ['PortfolioItem'],
//            autoLoad: true,
//            enableHierarchy: true,
////            filters: [
////            {
////              property: 'Milestones.ObjectID',
////              value: null
////            }]
//              
//        }).then({
//            success: this._onStoreBuilt,
//            scope: this
//        });
//    },
    launch: function() {
        Ext.create('Rally.data.wsapi.TreeStoreBuilder').build({
            models: ['PortfolioItem/Feature'],
            autoLoad: true,
            //enableHierarchy: true
        }).then({
            success: this._onStoreBuilt,
            scope: this
        });
    },
   _onStoreBuilt: function(store) {
     console.log(store);
        this.add({
            xtype: 'rallytreegrid',
            context: this.getContext(),
            store: store,
            columnCfgs: [
                'FormattedID',
                'Name',
                //'ScheduleState',
                'Owner'
            ]
        });
    }
});


            Rally.launchApp('CustomApp', {
                name:"hack",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .app {
  /* Add app styles here */
}

    </style>
</head>
<body>
</body>
</html>
